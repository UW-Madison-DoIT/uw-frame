<md-card class="widget-frame" id="widget-id-{{ widget.nodeId }}" aria-label="{{ widget.title }} widget">

  <!-- MAINTENANCE MODE OVERLAY -->
  <div class="overlay__maintenance-mode" ng-if="widget.lifecycleState === 'MAINTENANCE'">
    <div class="maintenance-content">
      <p>
        <md-icon class="md-warn">warning</md-icon>
      </p>
      <p>This app is undergoing maintenance and is temporarily unavailable.</p>
    </div>
  </div>

  <!-- HEADER -->
  <md-card-header class="widget-header">
    <!-- Widget Chrome -->
    <md-button class="widget-action widget-info md-icon-button" aria-label="Description: {{ widget.description }}" role="tooltip" ng-hide="widget.lifecycleState === 'MAINTENANCE'">
      <md-tooltip md-direction="top" class="widget-action-tooltip">
        {{ widget.description }}
      </md-tooltip>
      <md-icon>info</md-icon>
    </md-button>
    <md-button class="widget-action widget-remove md-icon-button"
               aria-label="remove {{ widget.title }} widget from your home screen"
               ng-click="widgetCtrl.removewidget(widget.nodeId, widget.title)"
               ng-hide="GuestMode || cantRemove || widget.lifecycleState === 'MAINTENANCE'">
      <md-icon>close</md-icon>
    </md-button>

    <md-card-header-text>
      <span class="md-title" style="text-align: center;" aria-label="{{ widget.title }}" tabindex="0">
	      {{ widget.title }}
      </span>
    </md-card-header-text>
  </md-card-header>

  <!-- BODY -->
  <md-card-content class="widget-content">

    <div ng-switch="widgetType" class="widget-type-container">

      <div ng-switch-when="option-link">
        <frame-option-link app="widget" config="widget.widgetConfig"></frame-option-link>
      </div>

      <div ng-switch-when="rss">
        <rss-widget app="widget" config="widget.widgetConfig"></rss-widget>
      </div>

      <div ng-switch-when="list-of-links">
        <frame-list-of-links app="widget" config="widget.widgetConfig"></frame-list-of-links>
      </div>

      <div ng-switch-when="search-with-links">
        <frame-search-with-links app="widget" config="widget.widgetConfig"></frame-search-with-links>
      </div>

      <div ng-switch-when="custom" class="custom-widget">
        <div ng-controller="FrameCustomWidgetController as customWidgetCtrl">
          <div ng-if="loading" layout="row" layout-align="center center">
            <loading-gif data-object='content' data-empty='isEmpty'></loading-gif>
          </div>
          <content-item ng-if="!loading"></content-item>
        </div>
      </div>

      <div ng-switch-when="basic">
        <a tabindex="-1" ng-href="{{ renderUrl() }}" target="{{ widget.target }}" class="basic-widget" rel="noopener noreferrer">
          <div class="widget-icon-container" layout="column" layout-align="center center">
            <frame-widget-icon></frame-widget-icon>
          </div>
        </a>
        <launch-button data-href="{{ renderUrl() }}"
                       data-target="_blank"
                       data-rel="noopener noreferrer"
                       data-button-text="{{ widget.widgetConfig.launchText ? widget.widgetConfig.launchText : 'Launch full app' }}"
                       data-aria-label="{{ widget.widgetConfig.launchText ? widget.widgetConfig.launchText : 'Launch ' + widget.title }}">
        </launch-button>
      </div>

    </div>
  </md-card-content>

</md-card>
